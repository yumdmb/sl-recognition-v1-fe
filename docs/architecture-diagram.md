# SignBridge Architecture Diagram

## System Overview

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                                    SIGNBRIDGE PLATFORM                                   │
│                         Sign Language Learning & Recognition System                      │
└─────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                                     CLIENT LAYER                                         │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  ┌──────────────────┐    ┌──────────────────┐    ┌──────────────────┐                   │
│  │   Web Browser    │    │  Camera/Webcam   │    │   File System    │                   │
│  │   (Desktop/      │    │   (MediaStream   │    │   (Upload/       │                   │
│  │    Mobile)       │    │    API)          │    │    Download)     │                   │
│  └────────┬─────────┘    └────────┬─────────┘    └────────┬─────────┘                   │
│           │                       │                       │                              │
│           └───────────────────────┼───────────────────────┘                              │
│                                   ▼                                                      │
└─────────────────────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                              FRONTEND APPLICATION                                        │
│                              Next.js 15 (App Router)                                     │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                           PRESENTATION LAYER                                     │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │    │
│  │  │  Landing    │  │  Dashboard  │  │   Learning  │  │   Gesture   │             │    │
│  │  │  Page       │  │  (User/     │  │   Platform  │  │ Recognition │             │    │
│  │  │             │  │   Admin)    │  │             │  │             │             │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘             │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │    │
│  │  │   Avatar    │  │   Forum     │  │    Chat     │  │  Profile/   │             │    │
│  │  │ Generation  │  │             │  │             │  │   Admin     │             │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘             │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
│                                          │                                               │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                            UI COMPONENT LIBRARY                                  │    │
│  │  ┌──────────────────────────────────────────────────────────────────────────┐   │    │
│  │  │  Shadcn/UI + Radix UI Primitives                                         │   │    │
│  │  │  • Buttons, Inputs, Dialogs, Dropdowns, Tabs, Cards                      │   │    │
│  │  │  • Forms (react-hook-form + zod validation)                              │   │    │
│  │  │  • Data Display (Tables, Charts via Recharts)                            │   │    │
│  │  │  • Navigation (Sidebar, Menubar, Breadcrumbs)                            │   │    │
│  │  └──────────────────────────────────────────────────────────────────────────┘   │    │
│  │  ┌──────────────────────────────────────────────────────────────────────────┐   │    │
│  │  │  Custom Feature Components                                               │   │    │
│  │  │  • GestureRecognition (Camera, Upload, Results)                          │   │    │
│  │  │  • Avatar3D (Three.js + React Three Fiber)                               │   │    │
│  │  │  • Learning (Tutorials, Quizzes, Materials)                              │   │    │
│  │  │  • Forum/Chat (Posts, Comments, Messages)                                │   │    │
│  │  └──────────────────────────────────────────────────────────────────────────┘   │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
│                                          │                                               │
└──────────────────────────────────────────┼──────────────────────────────────────────────┘

                                           │
┌──────────────────────────────────────────┼──────────────────────────────────────────────┐
│                              STATE MANAGEMENT LAYER                                      │
├──────────────────────────────────────────┴──────────────────────────────────────────────┤
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                          REACT CONTEXT PROVIDERS                                 │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │    │
│  │  │ AuthContext │  │  Sidebar    │  │  Language   │  │   Admin     │             │    │
│  │  │ • User      │  │  Context    │  │  Context    │  │  Context    │             │    │
│  │  │ • Session   │  │ • Open/     │  │ • ASL/MSL   │  │ • Admin     │             │    │
│  │  │ • Auth      │  │   Close     │  │   Toggle    │  │   Mode      │             │    │
│  │  │   Methods   │  │ • Mobile    │  │             │  │             │             │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘             │    │
│  │  ┌─────────────┐  ┌─────────────┐                                               │    │
│  │  │ HandDetect  │  │  Learning   │                                               │    │
│  │  │ Context     │  │  Context    │                                               │    │
│  │  │ • MediaPipe │  │ • Progress  │                                               │    │
│  │  │   Instance  │  │ • Path      │                                               │    │
│  │  └─────────────┘  └─────────────┘                                               │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                              CUSTOM HOOKS                                        │    │
│  │  useAuth, useCamera, useHandDetection, useGestureContributions,                 │    │
│  │  useWordSubmission, useAvatar3DRecording, useYouTubeMetadata, useMobile         │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
│                                          │                                               │
└──────────────────────────────────────────┼──────────────────────────────────────────────┘
                                           │
                                           ▼
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                                  SERVICE LAYER                                           │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                           BUSINESS LOGIC SERVICES                                │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │    │
│  │  │ userService │  │ tutorial    │  │ quiz        │  │ material    │             │    │
│  │  │ • Profile   │  │ Service     │  │ Service     │  │ Service     │             │    │
│  │  │ • CRUD      │  │ • Videos    │  │ • Questions │  │ • Downloads │             │    │
│  │  │             │  │ • Progress  │  │ • Scoring   │  │ • Files     │             │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘             │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐             │    │
│  │  │ forum       │  │ chat        │  │ signAvatar  │  │ learningPath│             │    │
│  │  │ Service     │  │ Service     │  │ Service     │  │ Service     │             │    │
│  │  │ • Posts     │  │ • Messages  │  │ • 3D Avatar │  │ • AI Path   │             │    │
│  │  │ • Comments  │  │ • Realtime  │  │ • Recording │  │ • Recommend │             │    │
│  │  │ • Likes     │  │ • Files     │  │             │  │             │             │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘             │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                              │    │
│  │  │ proficiency │  │ evaluation  │  │ email       │                              │    │
│  │  │ TestService │  │ Service     │  │ Service     │                              │    │
│  │  │ • Tests     │  │ • AI Eval   │  │ • Notifs    │                              │    │
│  │  │ • Scoring   │  │ • Analysis  │  │             │                              │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘                              │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
│                                          │                                               │
└──────────────────────────────────────────┼──────────────────────────────────────────────┘

                                           │
                                           ▼
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                                 API LAYER (Next.js)                                      │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                              API ROUTES                                          │    │
│  │  ┌─────────────────────────┐  ┌─────────────────────────┐                       │    │
│  │  │ /api/gesture-recognition│  │ /api/send-email         │                       │    │
│  │  │ • /recognize (POST)     │  │ • Email notifications   │                       │    │
│  │  │ • /search (GET)         │  │                         │                       │    │
│  │  └─────────────────────────┘  └─────────────────────────┘                       │    │
│  │  ┌─────────────────────────┐                                                    │    │
│  │  │ /api/youtube-metadata   │                                                    │    │
│  │  │ • Fetch video info      │                                                    │    │
│  │  └─────────────────────────┘                                                    │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                              MIDDLEWARE                                          │    │
│  │  • Session Management (Supabase SSR)                                            │    │
│  │  • Route Protection (Auth check)                                                │    │
│  │  • Role-Based Access Control (Admin/Deaf/Non-deaf)                              │    │
│  │  • JWT Token Validation                                                         │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
│                                          │                                               │
└──────────────────────────────────────────┼──────────────────────────────────────────────┘
                                           │
                                           ▼
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                              DATA ACCESS LAYER                                           │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                         SUPABASE CLIENT                                          │    │
│  │  ┌─────────────────────────┐  ┌─────────────────────────┐                       │    │
│  │  │ Browser Client          │  │ Server Client           │                       │    │
│  │  │ (createBrowserClient)   │  │ (createServerClient)    │                       │    │
│  │  │ • Client-side queries   │  │ • SSR/Middleware        │                       │    │
│  │  │ • Realtime subscriptions│  │ • API Routes            │                       │    │
│  │  └─────────────────────────┘  └─────────────────────────┘                       │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
│                                          │                                               │
└──────────────────────────────────────────┼──────────────────────────────────────────────┘
                                           │
                                           ▼

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                                  BACKEND SERVICES                                        │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                              SUPABASE (BaaS)                                     │    │
│  │                                                                                  │    │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                  │    │
│  │  │   PostgreSQL    │  │  Auth Service   │  │    Storage      │                  │    │
│  │  │   Database      │  │  (GoTrue)       │  │    (S3-like)    │                  │    │
│  │  │                 │  │                 │  │                 │                  │    │
│  │  │ • user_profiles │  │ • JWT Tokens    │  │ • chat_attach   │                  │    │
│  │  │ • tutorials     │  │ • Email Auth    │  │ • forum_attach  │                  │    │
│  │  │ • quiz_sets     │  │ • OAuth         │  │ • materials     │                  │    │
│  │  │ • materials     │  │ • Custom Claims │  │ • gesture_media │                  │    │
│  │  │ • forum_posts   │  │   (user_role)   │  │                 │                  │    │
│  │  │ • forum_comments│  │                 │  │                 │                  │    │
│  │  │ • chats         │  │                 │  │                 │                  │    │
│  │  │ • messages      │  │                 │  │                 │                  │    │
│  │  │ • gestures      │  │                 │  │                 │                  │    │
│  │  │ • gesture_contri│  │                 │  │                 │                  │    │
│  │  │ • sign_avatars  │  │                 │  │                 │                  │    │
│  │  │ • proficiency_  │  │                 │  │                 │                  │    │
│  │  │   tests         │  │                 │  │                 │                  │    │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘                  │    │
│  │                                                                                  │    │
│  │  ┌─────────────────┐  ┌─────────────────┐                                       │    │
│  │  │   Realtime      │  │  Row Level      │                                       │    │
│  │  │   (WebSocket)   │  │  Security (RLS) │                                       │    │
│  │  │                 │  │                 │                                       │    │
│  │  │ • Chat messages │  │ • User-based    │                                       │    │
│  │  │ • Notifications │  │   access        │                                       │    │
│  │  │ • Live updates  │  │ • Role-based    │                                       │    │
│  │  │                 │  │   policies      │                                       │    │
│  │  └─────────────────┘  └─────────────────┘                                       │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                           EXTERNAL SERVICES & ML PIPELINE                                │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                    GESTURE RECOGNITION ML SYSTEM (External)                      │    │
│  │                                                                                  │    │
│  │  ┌─────────────────────────────────────────────────────────────────────────┐    │    │
│  │  │                         WebSocket Connection                             │    │    │
│  │  │                    (Real-time bidirectional communication)               │    │    │
│  │  └─────────────────────────────────────────────────────────────────────────┘    │    │
│  │                                    │                                             │    │
│  │                                    ▼                                             │    │
│  │  ┌─────────────────────────────────────────────────────────────────────────┐    │    │
│  │  │                      ML BACKEND SERVER                                   │    │    │
│  │  │                    (Separate Repository)                                 │    │    │
│  │  │                                                                          │    │    │
│  │  │  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐      │    │    │
│  │  │  │   MediaPipe     │───▶│  Feature        │───▶│   ML Model      │      │    │    │
│  │  │  │   Hand          │    │  Extraction     │    │   (Trained)     │      │    │    │
│  │  │  │   Landmarker    │    │                 │    │                 │      │    │    │
│  │  │  │                 │    │ • 21 landmarks  │    │ • Classification│      │    │    │
│  │  │  │ • Hand tracking │    │   per hand      │    │ • ASL/MSL signs │      │    │    │
│  │  │  │ • 2 hands max   │    │ • 3D coords     │    │ • Confidence    │      │    │    │
│  │  │  │ • GPU delegate  │    │ • Handedness    │    │   scores        │      │    │    │
│  │  │  └─────────────────┘    └─────────────────┘    └─────────────────┘      │    │    │
│  │  │                                                         │                │    │    │
│  │  │                                                         ▼                │    │    │
│  │  │                                              ┌─────────────────┐         │    │    │
│  │  │                                              │   Recognition   │         │    │    │
│  │  │                                              │   Results       │         │    │    │
│  │  │                                              │ • Sign word     │         │    │    │
│  │  │                                              │ • Confidence %  │         │    │    │
│  │  │                                              └─────────────────┘         │    │    │
│  │  └─────────────────────────────────────────────────────────────────────────┘    │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                    CLIENT-SIDE HAND DETECTION (In-Browser)                       │    │
│  │                                                                                  │    │
│  │  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐              │    │
│  │  │   MediaPipe     │───▶│  Hand Detection │───▶│   3D Avatar     │              │    │
│  │  │   Tasks-Vision  │    │  Context        │    │   Rendering     │              │    │
│  │  │   (WASM/GPU)    │    │                 │    │   (Three.js)    │              │    │
│  │  │                 │    │ • Preloaded     │    │                 │              │    │
│  │  │ • CDN loaded    │    │ • Shared across │    │ • React Three   │              │    │
│  │  │ • VIDEO mode    │    │   components    │    │   Fiber         │              │    │
│  │  │ • 60fps detect  │    │                 │    │ • Hand3D comp   │              │    │
│  │  └─────────────────┘    └─────────────────┘    └─────────────────┘              │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                         OTHER EXTERNAL SERVICES                                  │    │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                  │    │
│  │  │   YouTube API   │  │   Email Service │  │    Vercel       │                  │    │
│  │  │   (Metadata)    │  │   (SMTP/API)    │  │   (Hosting)     │                  │    │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘                  │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘


## Data Flow Diagrams

### 1. Authentication Flow

```
┌──────────┐     ┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│  User    │────▶│  Login Form  │────▶│  AuthContext │────▶│   Supabase   │
│          │     │              │     │              │     │   Auth       │
└──────────┘     └──────────────┘     └──────────────┘     └──────────────┘
                                              │                    │
                                              │                    ▼
                                              │            ┌──────────────┐
                                              │            │  JWT Token   │
                                              │            │  + Session   │
                                              │            └──────────────┘
                                              │                    │
                                              ▼                    ▼
                                      ┌──────────────┐     ┌──────────────┐
                                      │  Middleware  │◀────│  Cookie      │
                                      │  (Route      │     │  Storage     │
                                      │   Protection)│     └──────────────┘
                                      └──────────────┘
                                              │
                                              ▼
                                      ┌──────────────┐
                                      │  Protected   │
                                      │  Routes      │
                                      └──────────────┘
```

### 2. Gesture Recognition Flow

```
┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│   Camera     │────▶│  MediaPipe   │────▶│  Hand        │
│   Feed       │     │  (Client)    │     │  Landmarks   │
└──────────────┘     └──────────────┘     └──────────────┘
                                                 │
                     ┌───────────────────────────┼───────────────────────────┐
                     │                           │                           │
                     ▼                           ▼                           ▼
            ┌──────────────┐           ┌──────────────┐           ┌──────────────┐
            │  3D Avatar   │           │  WebSocket   │           │  Local       │
            │  Preview     │           │  to ML       │           │  Recording   │
            │  (Three.js)  │           │  Backend     │           │  (Avatar)    │
            └──────────────┘           └──────────────┘           └──────────────┘
                                              │
                                              ▼
                                       ┌──────────────┐
                                       │  ML Model    │
                                       │  Inference   │
                                       └──────────────┘
                                              │
                                              ▼
                                       ┌──────────────┐
                                       │  Recognition │
                                       │  Result      │
                                       │  (Sign Word) │
                                       └──────────────┘
```

### 3. Learning Path Flow

```
┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│  User Takes  │────▶│  Proficiency │────▶│  Evaluation  │
│  Test        │     │  Test Service│     │  Service     │
└──────────────┘     └──────────────┘     └──────────────┘
                                                 │
                                                 ▼
                                          ┌──────────────┐
                                          │  Performance │
                                          │  Analysis    │
                                          └──────────────┘
                                                 │
                                                 ▼
┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│  Personalized│◀────│  Learning    │◀────│  Recommend   │
│  Dashboard   │     │  Path Service│     │  Engine      │
└──────────────┘     └──────────────┘     └──────────────┘
       │
       ▼
┌──────────────────────────────────────────────────────┐
│                  Learning Content                     │
│  ┌────────────┐  ┌────────────┐  ┌────────────┐      │
│  │ Tutorials  │  │  Quizzes   │  │ Materials  │      │
│  │ (Videos)   │  │            │  │ (PDFs)     │      │
│  └────────────┘  └────────────┘  └────────────┘      │
└──────────────────────────────────────────────────────┘
```


### 4. Real-time Chat Flow

```
┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│   User A     │────▶│  Chat        │────▶│   Supabase   │
│   (Sender)   │     │  Service     │     │   Database   │
└──────────────┘     └──────────────┘     └──────────────┘
                                                 │
                                                 ▼
                                          ┌──────────────┐
                                          │   Supabase   │
                                          │   Realtime   │
                                          │  (WebSocket) │
                                          └──────────────┘
                                                 │
                                                 ▼
┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│   User B     │◀────│  Realtime    │◀────│  Postgres    │
│  (Receiver)  │     │  Subscription│     │  Changes     │
└──────────────┘     └──────────────┘     └──────────────┘
```

## Database Schema Overview

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                                  DATABASE SCHEMA                                         │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                              USER MANAGEMENT                                     │    │
│  │                                                                                  │    │
│  │  ┌─────────────────┐                                                            │    │
│  │  │  user_profiles  │◀──────────────────────────────────────────────────────┐    │    │
│  │  │  ─────────────  │                                                       │    │    │
│  │  │  id (PK, FK)    │──▶ auth.users                                         │    │    │
│  │  │  name           │                                                       │    │    │
│  │  │  email          │                                                       │    │    │
│  │  │  role           │  ('admin' | 'deaf' | 'non-deaf')                      │    │    │
│  │  │  proficiency    │  ('Beginner' | 'Intermediate' | 'Advanced')           │    │    │
│  │  │  avatar_url     │                                                       │    │    │
│  │  └─────────────────┘                                                       │    │    │
│  └────────────────────────────────────────────────────────────────────────────┼────┘    │
│                                                                               │          │
│  ┌────────────────────────────────────────────────────────────────────────────┼────┐    │
│  │                              LEARNING PLATFORM                             │    │    │
│  │                                                                            │    │    │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐            │    │    │
│  │  │    tutorials    │  │   quiz_sets     │  │    materials    │            │    │    │
│  │  │  ─────────────  │  │  ─────────────  │  │  ─────────────  │            │    │    │
│  │  │  id (PK)        │  │  id (PK)        │  │  id (PK)        │            │    │    │
│  │  │  title          │  │  title          │  │  title          │            │    │    │
│  │  │  video_url      │  │  description    │  │  file_url       │            │    │    │
│  │  │  level          │  │  language       │  │  level          │            │    │    │
│  │  │  language       │  │  created_by ────┼──┼──────────────────────────────┤    │    │
│  │  │  created_by ────┼──┼─────────────────┼──┘                              │    │    │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘            │    │    │
│  │          │                    │                                            │    │    │
│  │          ▼                    ▼                                            │    │    │
│  │  ┌─────────────────┐  ┌─────────────────┐                                 │    │    │
│  │  │tutorial_progress│  │  quiz_progress  │                                 │    │    │
│  │  │  ─────────────  │  │  ─────────────  │                                 │    │    │
│  │  │  user_id (FK) ──┼──┼─────────────────┼─────────────────────────────────┤    │    │
│  │  │  tutorial_id    │  │  user_id (FK) ──┼─────────────────────────────────┤    │    │
│  │  │  status         │  │  quiz_set_id    │                                 │    │    │
│  │  │  progress %     │  │  score          │                                 │    │    │
│  │  └─────────────────┘  └─────────────────┘                                 │    │    │
│  └───────────────────────────────────────────────────────────────────────────────┘│    │
│                                                                                    │    │

│  ┌───────────────────────────────────────────────────────────────────────────────┐│    │
│  │                              GESTURE SYSTEM                                   ││    │
│  │                                                                               ││    │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐               ││    │
│  │  │    gestures     │  │gesture_contribu │  │   sign_avatars  │               ││    │
│  │  │  ─────────────  │  │  ─────────────  │  │  ─────────────  │               ││    │
│  │  │  id (PK)        │  │  id (PK)        │  │  id (PK)        │               ││    │
│  │  │  name           │  │  word           │  │  name           │               ││    │
│  │  │  description    │  │  media_url      │  │  recording_data │               ││    │
│  │  │  language       │  │  status         │  │  language       │               ││    │
│  │  │  category       │  │  user_id (FK) ──┼──┼──────────────────────────────┐  ││    │
│  │  │  created_by ────┼──┼─────────────────┼──┼──user_id (FK) ───────────────┤  ││    │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘            │  ││    │
│  │          │                                                                 │  ││    │
│  │          ▼                                                                 │  ││    │
│  │  ┌─────────────────┐                                                      │  ││    │
│  │  │  gesture_media  │                                                      │  ││    │
│  │  │  ─────────────  │                                                      │  ││    │
│  │  │  gesture_id(FK) │                                                      │  ││    │
│  │  │  media_type     │                                                      │  ││    │
│  │  │  url            │                                                      │  ││    │
│  │  └─────────────────┘                                                      │  ││    │
│  └───────────────────────────────────────────────────────────────────────────┼──┘│    │
│                                                                               │   │    │
│  ┌────────────────────────────────────────────────────────────────────────────┼──┐│    │
│  │                              INTERACTION SYSTEM                            │  ││    │
│  │                                                                            │  ││    │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐            │  ││    │
│  │  │   forum_posts   │  │ forum_comments  │  │     chats       │            │  ││    │
│  │  │  ─────────────  │  │  ─────────────  │  │  ─────────────  │            │  ││    │
│  │  │  id (PK)        │  │  id (PK)        │  │  id (PK)        │            │  ││    │
│  │  │  title          │  │  post_id (FK)   │  │  is_group       │            │  ││    │
│  │  │  content        │  │  content        │  │  last_message_at│            │  ││    │
│  │  │  user_id (FK) ──┼──┼──user_id (FK) ──┼──┼─────────────────┼────────────┤  ││    │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘            │  ││    │
│  │          │                    │                    │                       │  ││    │
│  │          ▼                    ▼                    ▼                       │  ││    │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐            │  ││    │
│  │  │   post_likes    │  │  comment_likes  │  │    messages     │            │  ││    │
│  │  │  ─────────────  │  │  ─────────────  │  │  ─────────────  │            │  ││    │
│  │  │  post_id (FK)   │  │  comment_id(FK) │  │  chat_id (FK)   │            │  ││    │
│  │  │  user_id (FK) ──┼──┼──user_id (FK) ──┼──┼──sender_id (FK)─┼────────────┘  ││    │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘               ││    │
│  └──────────────────────────────────────────────────────────────────────────────┘│    │
│                                                                                   │    │
└───────────────────────────────────────────────────────────────────────────────────┴────┘
```


## Technology Stack Summary

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                                  TECHNOLOGY STACK                                        │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  FRONTEND                          BACKEND                        ML/AI                  │
│  ─────────                         ───────                        ─────                  │
│  • Next.js 15 (App Router)         • Supabase (BaaS)              • MediaPipe            │
│  • React 19                        • PostgreSQL                    • Hand Landmarker     │
│  • TypeScript 5                    • Supabase Auth (GoTrue)       • Custom ML Model      │
│  • Tailwind CSS 4                  • Supabase Storage             • WebSocket Server     │
│  • Shadcn/UI                       • Supabase Realtime                                   │
│  • Radix UI Primitives             • Row Level Security                                  │
│  • React Hook Form + Zod                                                                 │
│  • Framer Motion                   EXTERNAL SERVICES                                     │
│  • Three.js + R3F                  ─────────────────                                     │
│  • Recharts                        • Vercel (Hosting)                                    │
│  • Sonner (Toasts)                 • YouTube API                                         │
│  • date-fns                        • Email Service (SMTP)                                │
│                                                                                          │
│  STATE MANAGEMENT                  DEVELOPMENT                                           │
│  ────────────────                  ───────────                                           │
│  • React Context API               • ESLint + TypeScript ESLint                          │
│  • Custom Hooks                    • Supabase CLI                                        │
│  • Supabase Realtime               • Turbopack (Dev)                                     │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

## User Roles & Access Control

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                              ROLE-BASED ACCESS CONTROL                                   │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                                   ROLES                                          │    │
│  │                                                                                  │    │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                  │    │
│  │  │    NON-DEAF     │  │      DEAF       │  │     ADMIN       │                  │    │
│  │  │  (Learner)      │  │   (Community)   │  │  (Administrator)│                  │    │
│  │  │                 │  │                 │  │                 │                  │    │
│  │  │ ✓ Learning      │  │ ✓ Learning      │  │ ✓ All Features  │                  │    │
│  │  │ ✓ Gesture Recog │  │ ✓ Gesture Recog │  │ ✓ User Mgmt     │                  │    │
│  │  │ ✓ Avatar Gen    │  │ ✓ Avatar Gen    │  │ ✓ Content Mod   │                  │    │
│  │  │ ✓ Forum/Chat    │  │ ✓ Forum/Chat    │  │ ✓ Contributions │                  │    │
│  │  │ ✓ Contributions │  │ ✓ Contributions │  │   Review        │                  │    │
│  │  │ ✓ View Own      │  │ ✓ View Own      │  │ ✓ System Config │                  │    │
│  │  │   Submissions   │  │   Submissions   │  │                 │                  │    │
│  │  │                 │  │                 │  │                 │                  │    │
│  │  │ ✗ Admin Panel   │  │ ✗ Admin Panel   │  │ ✓ Admin Panel   │                  │    │
│  │  │ ✗ Manage Others │  │ ✗ Manage Others │  │ ✓ Manage All    │                  │    │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────┘                  │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                           ROUTE PROTECTION                                       │    │
│  │                                                                                  │    │
│  │  PUBLIC ROUTES          PROTECTED ROUTES         ADMIN-ONLY ROUTES              │    │
│  │  ─────────────          ────────────────         ─────────────────              │    │
│  │  • /                    • /dashboard             • /admin                        │    │
│  │  • /auth/login          • /profile               • /gesture/manage-contributions │    │
│  │  • /auth/register       • /learning/*                                            │    │
│  │  • /auth/callback       • /gesture/*                                             │    │
│  │                         • /gesture-recognition/*                                 │    │
│  │                         • /avatar/*                                              │    │
│  │                         • /interaction/*                                         │    │
│  │                         • /proficiency-test                                      │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```


## Feature Modules

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                                  FEATURE MODULES                                         │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │  1. GESTURE RECOGNITION                                                          │    │
│  │  ───────────────────────                                                         │    │
│  │  • Real-time camera capture with MediaPipe hand detection                        │    │
│  │  • WebSocket connection to external ML backend for sign classification           │    │
│  │  • File upload for static image recognition                                      │    │
│  │  • Search gestures in database                                                   │    │
│  │  • ASL/MSL language support                                                      │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │  2. LEARNING PLATFORM                                                            │    │
│  │  ────────────────────                                                            │    │
│  │  • Video tutorials with YouTube integration                                      │    │
│  │  • Interactive quizzes with scoring                                              │    │
│  │  • Downloadable learning materials (PDFs)                                        │    │
│  │  • Progress tracking per user                                                    │    │
│  │  • AI-powered learning path recommendations                                      │    │
│  │  • Proficiency level assessment                                                  │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │  3. 3D AVATAR GENERATION                                                         │    │
│  │  ───────────────────────                                                         │    │
│  │  • Real-time hand tracking with MediaPipe                                        │    │
│  │  • 3D hand rendering with Three.js / React Three Fiber                           │    │
│  │  • Recording hand movements as avatar animations                                 │    │
│  │  • Save/load avatar recordings to database                                       │    │
│  │  • Admin verification workflow                                                   │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │  4. GESTURE CONTRIBUTIONS                                                        │    │
│  │  ────────────────────────                                                        │    │
│  │  • User-submitted sign language gestures                                         │    │
│  │  • Image/video upload with preview                                               │    │
│  │  • Category and tag management                                                   │    │
│  │  • Admin review and approval workflow                                            │    │
│  │  • Duplicate detection                                                           │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │  5. COMMUNITY INTERACTION                                                        │    │
│  │  ────────────────────────                                                        │    │
│  │  • Forum with posts, comments, and nested replies                                │    │
│  │  • Like system for posts and comments                                            │    │
│  │  • File attachments (images, documents)                                          │    │
│  │  • Real-time chat with WebSocket                                                 │    │
│  │  • Unread message tracking                                                       │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │  6. PROFICIENCY TESTING                                                          │    │
│  │  ──────────────────────                                                          │    │
│  │  • Initial proficiency assessment                                                │    │
│  │  • Multiple question types                                                       │    │
│  │  • Performance analysis and scoring                                              │    │
│  │  • Level assignment (Beginner/Intermediate/Advanced)                             │    │
│  │  • Adaptive difficulty adjustment                                                │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```


## Deployment Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                                DEPLOYMENT ARCHITECTURE                                   │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│                              ┌─────────────────────┐                                     │
│                              │      INTERNET       │                                     │
│                              └──────────┬──────────┘                                     │
│                                         │                                                │
│                    ┌────────────────────┼────────────────────┐                          │
│                    │                    │                    │                          │
│                    ▼                    ▼                    ▼                          │
│  ┌─────────────────────┐  ┌─────────────────────┐  ┌─────────────────────┐             │
│  │       VERCEL        │  │      SUPABASE       │  │    ML BACKEND       │             │
│  │    (Frontend)       │  │      (BaaS)         │  │    (External)       │             │
│  │                     │  │                     │  │                     │             │
│  │  ┌───────────────┐  │  │  ┌───────────────┐  │  │  ┌───────────────┐  │             │
│  │  │  Next.js App  │  │  │  │  PostgreSQL   │  │  │  │  WebSocket    │  │             │
│  │  │  (SSR/SSG)    │  │  │  │  Database     │  │  │  │  Server       │  │             │
│  │  └───────────────┘  │  │  └───────────────┘  │  │  └───────────────┘  │             │
│  │  ┌───────────────┐  │  │  ┌───────────────┐  │  │  ┌───────────────┐  │             │
│  │  │  API Routes   │  │  │  │  Auth Service │  │  │  │  MediaPipe    │  │             │
│  │  │  (Serverless) │  │  │  │  (GoTrue)     │  │  │  │  + ML Model   │  │             │
│  │  └───────────────┘  │  │  └───────────────┘  │  │  └───────────────┘  │             │
│  │  ┌───────────────┐  │  │  ┌───────────────┐  │  │                     │             │
│  │  │  Edge        │  │  │  │  Storage      │  │  │                     │             │
│  │  │  Middleware   │  │  │  │  (S3-like)   │  │  │                     │             │
│  │  └───────────────┘  │  │  └───────────────┘  │  │                     │             │
│  │                     │  │  ┌───────────────┐  │  │                     │             │
│  │                     │  │  │  Realtime     │  │  │                     │             │
│  │                     │  │  │  (WebSocket)  │  │  │                     │             │
│  │                     │  │  └───────────────┘  │  │                     │             │
│  └─────────────────────┘  └─────────────────────┘  └─────────────────────┘             │
│           │                         │                         │                         │
│           │                         │                         │                         │
│           └─────────────────────────┼─────────────────────────┘                         │
│                                     │                                                    │
│                                     ▼                                                    │
│                          ┌─────────────────────┐                                        │
│                          │    END USERS        │                                        │
│                          │  (Web Browsers)     │                                        │
│                          └─────────────────────┘                                        │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

## Security Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                                SECURITY ARCHITECTURE                                     │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  AUTHENTICATION                    AUTHORIZATION                 DATA PROTECTION        │
│  ──────────────                    ─────────────                 ───────────────        │
│  • Supabase Auth (GoTrue)          • Row Level Security (RLS)   • HTTPS/TLS             │
│  • JWT Tokens                      • Custom JWT Claims          • Input Validation      │
│  • Email Verification              • Middleware Route Guards    • Zod Schema            │
│  • Password Reset                  • Role-based Policies        • XSS Prevention        │
│  • Session Management              • User-scoped Data Access    • File Type Validation  │
│  • Cookie-based Sessions                                        • Size Limits           │
│                                                                                          │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐    │
│  │                           SECURITY FLOW                                          │    │
│  │                                                                                  │    │
│  │  Request → Middleware → JWT Validation → RLS Policies → Data Access             │    │
│  │                │              │                │                                 │    │
│  │                ▼              ▼                ▼                                 │    │
│  │         Route Check    Role Extraction   Policy Evaluation                       │    │
│  │         (Protected?)   (from JWT)        (user_id match?)                        │    │
│  └─────────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

---

*Generated: December 2024*
*SignBridge - Sign Language Learning & Recognition Platform*
